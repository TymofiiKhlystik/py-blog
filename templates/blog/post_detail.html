{% extends "base.html" %}

{% block content %}
	<div class="container mt-4">

		<div class="card mb-4">
			<div class="card-body">
				<h2 class="card-title">{{ post.title }}</h2>
				<p class="card-text">{{ post.content }}</p>
				<p class="text-muted">By <strong>{{ post.owner }}</strong> at {{ post.created_time }}</p>
			</div>
		</div>

		<h4>Comments ({{ post.comments.count }})</h4>
		<ul class="list-group mb-4">
			{% for comment in post.comments.all %}
				<li class="list-group-item">
					<strong>{{ comment.user }}</strong>
					<p>{{ comment.content }}</p>
					<small class="text-muted">({{ comment.created_time }})</small>
				</li>
			{% empty %}
				<li class="list-group-item">No comments yet.</li>
			{% endfor %}
		</ul>

		<h4>Add a Comment</h4>
		<form method="post">
			{% csrf_token %}
			<div class="form-group">
				{{ form.content }}
			</div>
			<button type="submit" class="btn btn-primary" {% if not user.is_authenticated %}disabled{% endif %}>
				Submit
			</button>
			{% if not user.is_authenticated %}
				<small class="form-text text-muted">You must log in to submit a comment.</small>
			{% endif %}
		</form>

		<button type="button" class="btn btn-secondary mt-3" onclick="history.back()">Go Back</button>

	</div>
{% endblock %}
